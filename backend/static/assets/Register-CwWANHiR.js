import{r as t,b as m,j as e,S as c,I as v,B as $,a as u,T as p,L as F}from"./index-BSvnsiwi.js";import{c as B,a as l,u as R,F as T,A as U,R as d,o as _,L as x}from"./RHFTextField-Dstqy9Cw.js";import{I as k,E as A,a as C}from"./EyeSlash.esm-DyaowK8y.js";import{A as K}from"./AuthSocial-BM5ngiMv.js";const h=void 0,G=()=>{const[a,g]=t.useState(!1),[o,E]=t.useState(null),[f,n]=t.useState(null),[i,I]=t.useState(null),[w,j]=t.useState(null),P=B().shape({username:l().required("Username is required"),email:l().required("Email is required").email("Email must be a valid email address"),password:l().required("Password is required"),password2:l().required("Confirm password is required")}),y=R({resolver:_(P)}),{handleSubmit:q,formState:{errors:S}}=y,L=async s=>{const b=u.loading("please wait");s.password===s.password2?m.post(`https://${h}/signup/`,{email:s.email,password:s.password,password2:s.password2,username:s.username}).then(r=>{console.log(r),localStorage.setItem("access_token",r.data.token.access),localStorage.setItem("refresh_token",r.data.token.refresh),window.location.href="/"}).catch(r=>{console.log(r),u.update(b,{render:`${r.response.data.error}`,autoClose:!0,isLoading:!1,type:"warning"})}):u.update(b,{render:"password and confirm password not same",autoClose:!0,isLoading:!1,type:"warning"})};return t.useEffect(()=>{o?o.length>5?m.post(`https://${h}/exists/`,{username:o,email:null}).then(s=>{console.log(s.data.exists),s.data.exists?n("Choose a different username âŒ"):n("Good username ðŸ‘")}):n("More than 5 characters âœï¸"):n(null)},[o]),t.useEffect(()=>{i&&i.includes("@")?m.post(`https://${h}/exists/`,{username:null,email:i}).then(s=>{console.log(s.data.exists),s.data.exists&&j("Choose a different email âŒ")}):j(null)},[i]),e.jsx(T,{methods:y,onSubmit:q(L),children:e.jsxs(c,{spacing:3,children:[!!S.afterSubmit&&e.jsx(U,{severity:"error",children:S.afterSubmit.message}),e.jsx(d,{name:"username",label:"User name",onKeyUp:s=>{E(s.target.value)}}),f||"",e.jsx(d,{name:"email",label:"Email address",onKeyUp:s=>{I(s.target.value)}}),w||"",e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(d,{name:"password",label:"Password",type:a?"text":"password",InputProps:{endAdornment:e.jsx(k,{children:e.jsx(v,{onClick:()=>{g(!a)},children:a?e.jsx(A,{}):e.jsx(C,{})})})}}),e.jsx(d,{name:"password2",label:"Confirm Password",type:a?"text":"password",InputProps:{endAdornment:e.jsx(k,{children:e.jsx(v,{onClick:()=>{g(!a)},children:a?e.jsx(A,{}):e.jsx(C,{})})})}})]}),e.jsx($,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",sx:{bgcolor:"text.primary",color:s=>s.palette.mode==="light"?"common.white":"grey.800","&:hover":{bgcolor:"text.primary",color:s=>s.palette.mode==="light"?"common.white":"grey.800"}},children:"Create Account"})]})})},M=()=>e.jsxs(c,{spacing:2,sx:{mb:5,position:"relative"},children:[e.jsx(p,{variant:"h4",children:"Get Started With Noto Chats"}),e.jsxs(c,{direction:"row",spacing:.5,children:[e.jsx(p,{variant:"body2",children:"Allready have an account?"}),e.jsx(x,{component:F,to:"/auth/login",variant:"subtitle2",children:"Sign in"})]}),e.jsx(G,{}),e.jsxs(p,{component:"div",sx:{color:"text.secondary",mt:3,typography:"caption",textAlign:"center"},children:["By signining up, I agree to ",e.jsx(x,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",e.jsx(x,{underline:"always",color:"text.primary",children:"Privacy policy"})]}),e.jsx(K,{})]});export{M as default};
